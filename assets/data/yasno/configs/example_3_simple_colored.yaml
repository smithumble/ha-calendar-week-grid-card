type: custom:calendar-week-grid-card
language: en
time_format: 'HH:mm'
entities:
  - entity: calendar.planned_outages
    filter: Outage
  - entity: calendar.probable_outages
  - entity: calendar.planned_outages
    filter: Emergency Shutdowns
  - entity: calendar.planned_outages
    filter: Waiting for Schedule
  - entity: calendar.planned_outages
    filter: Schedule Applies
css: |
  ha-card {
    --event-border-radius: 4px;
    --color-neutral: var(--secondary-text-color);
    --color-warning: var(--warning-color);
    --color-error: var(--error-color);
    --color-info: var(--info-color);
    --color-success: var(--success-color);
  }

  .cell {
    .event-block {
      border: 1px dotted rgb(from var(--color-neutral) r g b / 0.3);
    }

    &:not(.has-event) ha-icon {
      --icon: mdi:checkbox-blank-circle-outline;
      opacity: 0.3;
    }

    [data-entity="calendar.planned_outages"] {
      &[data-filter="Outage"] {
        &.event-icon {
          --icon: mdi:flash-off;
          color: var(--color-error);
        }

        .event-block {
          border: 1px solid var(--color-error);
        }

        .event-sub-block {
          background-color: rgb(from var(--color-error) r g b / 0.1);
        }
      }

      &[data-filter="Emergency Shutdowns"] {
        &.event-icon {
          --icon: mdi:transmission-tower-off;
          color: var(--color-error);
        }

        .event-block {
          border: 1px double var(--color-error);
        }

        .event-sub-block {
          background-color: rgb(from var(--color-error) r g b / 0.2);
        }
      }

      &[data-filter="Waiting for Schedule"] {
        &.event-icon {
          --icon: mdi:timer-sand;
          opacity: 0.4;
          color: var(--color-info);
        }

        .event-block {
          opacity: 0.4;
          border: 1px dotted var(--color-info);
        }

        .event-sub-block {
          background-color: rgb(from var(--color-info) r g b / 0.1);
        }
      }

      &[data-filter="Schedule Applies"] {
        &.event-icon {
          --icon: mdi:calendar-check;
          opacity: 0.4;
          color: var(--color-success);
        }

        .event-block {
          opacity: 0.4;
          border: 1px dotted var(--color-info);
        }

        .event-sub-block {
          background-color: rgb(from var(--color-success) r g b / 0.1);
        }
      }
    }

    [data-entity="calendar.probable_outages"] {
      &.event-icon {
        --icon: mdi:alert-circle-outline;
        color: var(--color-warning);
      }

      .event-block {
        border: 1px dashed var(--color-warning);
      }

      .event-sub-block {
        background-color: rgb(from var(--color-warning) r g b / 0.1);
      }
    }
  }
