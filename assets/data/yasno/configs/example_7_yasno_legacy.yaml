type: custom:calendar-week-grid-card
language: en
time_format: HH:mm
icons_container: event
icons_mode: all
entities:
  - name: planned_outages
    entity: calendar.planned_outages
    filter: Outage
    icon: mdi:flash-off
  - name: probable_outages
    entity: calendar.probable_outages
    icon: mdi:flash-off
  - name: emergency_shutdowns
    entity: calendar.planned_outages
    filter: Emergency Shutdowns
    icon: mdi:transmission-tower-off
  - name: waiting_for_schedule
    entity: calendar.planned_outages
    filter: Waiting for Schedule
    icon: mdi:timer-sand
css: |
  :host {
    --color-highlight: #FDD631;
    --color-highlight-icon: #1e1e2e;

    --color-highlight-light: #FDD631;
    --color-highlight-light-icon: var(--primary-text-color);
  }

  :host-context(.theme-dark) {
    --color-highlight-light-icon: #FDD631;
  }

  ha-card {
    padding: 0;
  }

  .grid-container {
    gap: 0px;
  }

  .event-icon {
    --icon-size: 16px;
  }

  .event-block, .time-label {
    background-color: var(--card-background-color);
  }

  .today, .now {
    &.day-header, &.time-label, .event-sub-block {
      background-color: rgb(from var(--color-highlight-light) r g b / 0.4);
    }
  }

  .event-block, .day-header {
    border-radius: 0px;
  }

  [data-type="blank"] {
    &.event-icon {
      opacity: 0.3;
    }
  }

  [data-name="planned_outages"] {
    .event-block {
      background-color: var(--color-highlight);
    }

    &.event-icon {
      color: var(--color-highlight-icon);
    }
  }

  [data-name="waiting_for_schedule"] {
    &.event-icon {
      color: var(--color-highlight-light-icon);
    }
  }

  [data-name="schedule_applies"] {
    &.event-icon {
      opacity: 0.4;
      color: var(--color-highlight-icon);
    }
  }

  [data-name="probable_outages"] {
    &.event-icon {
      color: var(--color-highlight-light-icon);
    }
  }

  .grid-container > :nth-child(16n+9),
  .grid-container > :nth-child(16n+10),
  .grid-container > :nth-child(16n+11),
  .grid-container > :nth-child(16n+12),
  .grid-container > :nth-child(16n+13),
  .grid-container > :nth-child(16n+14),
  .grid-container > :nth-child(16n+15),
  .grid-container > :nth-child(16n+16) {
    .event-wrapper:not([data-name="planned_outages"]) .event-block, &.time-label {
      filter: contrast(1.05) brightness(0.95); 
    }
  }
